<Window x:Class="IRI.Maptor.Dan.TrajectoryCompression01.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"        
        xmlns:iriJabControls="clr-namespace:IRI.Maptor.Jab.Controls.View;assembly=IRI.Maptor.Jab.Controls"
        mc:Ignorable="d" Loaded="Window_Loaded"
        Title="Trajectory Compression - (Powered by #MakanNegar)" Height="450" Width="800">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="2.5*"/>
        </Grid.ColumnDefinitions>
        <StackPanel Orientation="Horizontal" Grid.ColumnSpan="3">
            <StackPanel.Resources>
                <Style TargetType="Button">
                    <Setter Property="Margin" Value="4"/>
                    <Setter Property="MinWidth" Value="55"/>
                </Style>
            </StackPanel.Resources>
            <Button Content="Add Shapefile ... " Command="{Binding AddShapefileCommand}"></Button>
            <Button Content="Full Extent" Command="{Binding FullExtentCommand}"/>

            <Button Content="Simplify Angle" Command="{Binding SimplifyByAngleCommand}"></Button>
            <Button Content="Simplify Area" Command="{Binding SimplifyByAreaCommand}"></Button>
            <Button Content="Go" Click="Button_Click"></Button>
            <telerik:RadNumericUpDown Minimum="0" Maximum="10000" Value="{Binding DistanceTolerance}"/>
            <Button Content="visvalingam" Command="{Binding SimplifyVisvalingamCommand}"/>

            <!--<Button Content="Logistic Regression Fit..." Click="LogisticRegressionFit_Click"/>-->


        </StackPanel>
        <Grid Grid.Row="1" Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Border Grid.Row="0" Margin="4" BorderBrush="Black" BorderThickness="1" Padding="4">
                <TabControl>
                    <TabControl.Items>
                        <TabItem Header="General">
                            <StackPanel Grid.Row="0" Grid.Column="2"  HorizontalAlignment="Left" VerticalAlignment="Top" Visibility="{Binding IsDebugMode,Converter={StaticResource boolToVisibilityConverter}}" 
                        Margin="0">
                                <ComboBox VerticalAlignment="Center" ItemsSource="{Binding StandardScales}"
                          SelectedItem="{Binding ElementName=map, Path=MapScale, Mode=TwoWay, Converter={StaticResource scaleToGoogleScaleConverter}}" MinWidth="120"/>
                                <TextBlock Text="{Binding ElementName=map, Path=MapScale, Converter={StaticResource doubleInverseConverter}, StringFormat={}{0:N2}}" MinWidth="120" VerticalAlignment="Center" Margin="4"/>
                                <TextBlock Text="{Binding CurrentZoomLevel, StringFormat={}Zoom Level:{0}}" Background="White"  Margin="2" Padding="4" Opacity=".8"/>
                                <TextBlock Text="{Binding InverseMapScale, StringFormat={}Map Scale(Eq):{0:n2}}" Background="White"  Margin="2" Padding="4" Opacity=".8"/>
                                <TextBlock Text="{Binding CurrentPointInverseMapScale, StringFormat={}Map Scale:{0:n2}}" Background="White"  Margin="2" Padding="4" Opacity=".8"/>
                                <TextBlock Text="{Binding CurrentPointGroundResolution, StringFormat={}Ground Resolution:{0:n2}}" Background="White"  Margin="2" Padding="4" Opacity=".8"/>
                            </StackPanel>
                        </TabItem>
                        <TabItem Header="Area Stat">
                            <TextBlock   Grid.Row="3" Margin="8" Text="{Binding AreaStatistics.Description}" MinHeight="150" TextWrapping="Wrap"/>
                        </TabItem>
                        <TabItem Header="Angle Stat">
                            <TextBlock   Grid.Row="3" Margin="8" Text="{Binding AngleStat.Description}" MinHeight="150" TextWrapping="Wrap"/>
                        </TabItem>
                    </TabControl.Items>
                </TabControl>
            </Border>
            <TextBlock Grid.Row="1" Text="Layers" HorizontalAlignment="Center" FontSize="18" Margin="4"/>
            <!--<ListBox ScrollViewer.VerticalScrollBarVisibility="Auto" VirtualizingPanel.IsVirtualizing="True"
                     Grid.Row="1" Margin="8" ItemsSource="{Binding Geometries}" DisplayMemberPath="Name" SelectedItem="{Binding SelectedGeometry, Mode=TwoWay}" MinHeight="200"/>-->
            <iriJabControls:MapLegendItemWithOptionsView Grid.Row="2" Margin="8"   
                                                          DataContext="{Binding Layers}" />
        </Grid>
        <GridSplitter Grid.Column="1" Grid.Row="1" Grid.RowSpan="2" Width="5" ResizeBehavior="PreviousAndNext"/>
        <Border Grid.Column="2" Grid.Row="1"  BorderBrush="Black" BorderThickness="1" Margin="1"/>
        <iriJabControls:MapViewer Grid.Row="1" Grid.Column="2" x:Name="map"/>
    </Grid>
</Window>
